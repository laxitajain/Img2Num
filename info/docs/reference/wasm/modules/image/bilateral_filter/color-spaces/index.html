<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-reference/wasm/modules/image/bilateral_filter/color-spaces" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Color Space Selection ‚Äî RGB vs CIELAB | Img2Num</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://ryan-millard.github.io/Img2Num/info/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://ryan-millard.github.io/Img2Num/info/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://ryan-millard.github.io/Img2Num/info/docs/reference/wasm/modules/image/bilateral_filter/color-spaces/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="algolia-site-verification" content="DB4B5FEC1545D32B"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Color Space Selection ‚Äî RGB vs CIELAB | Img2Num"><meta data-rh="true" name="description" content="The bilateral filter in Img2Num supports two color spaces for computing range (color) distances: RGB and CIELAB. This guide explains the differences, trade-offs, and when to use each."><meta data-rh="true" property="og:description" content="The bilateral filter in Img2Num supports two color spaces for computing range (color) distances: RGB and CIELAB. This guide explains the differences, trade-offs, and when to use each."><link data-rh="true" rel="icon" href="/Img2Num/info/img/favicon.svg"><link data-rh="true" rel="canonical" href="https://ryan-millard.github.io/Img2Num/info/docs/reference/wasm/modules/image/bilateral_filter/color-spaces/"><link data-rh="true" rel="alternate" href="https://ryan-millard.github.io/Img2Num/info/docs/reference/wasm/modules/image/bilateral_filter/color-spaces/" hreflang="en"><link data-rh="true" rel="alternate" href="https://ryan-millard.github.io/Img2Num/info/docs/reference/wasm/modules/image/bilateral_filter/color-spaces/" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Reference","item":"https://ryan-millard.github.io/Img2Num/info/docs/reference"},{"@type":"ListItem","position":2,"name":"WebAssembly (WASM)","item":"https://ryan-millard.github.io/Img2Num/info/docs/reference/wasm"},{"@type":"ListItem","position":3,"name":"Modules","item":"https://ryan-millard.github.io/Img2Num/info/docs/reference/wasm/modules"},{"@type":"ListItem","position":4,"name":"Image Module","item":"https://ryan-millard.github.io/Img2Num/info/docs/reference/wasm/modules/image"},{"@type":"ListItem","position":5,"name":"bilateral_filter.h","item":"https://ryan-millard.github.io/Img2Num/info/docs/reference/wasm/modules/image/bilateral_filter"},{"@type":"ListItem","position":6,"name":"Color Space Selection","item":"https://ryan-millard.github.io/Img2Num/info/docs/reference/wasm/modules/image/bilateral_filter/color-spaces"}]}</script><link rel="alternate" type="application/rss+xml" href="/Img2Num/info/blog/rss.xml" title="Img2Num RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/Img2Num/info/blog/atom.xml" title="Img2Num Atom Feed">






<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-C7LD33MNTX"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-C7LD33MNTX",{anonymize_ip:!0})</script>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><link rel="stylesheet" href="/Img2Num/info/assets/css/styles.ce79eac9.css">
<script src="/Img2Num/info/assets/js/runtime~main.3d472287.js" defer="defer"></script>
<script src="/Img2Num/info/assets/js/main.8a071834.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/Img2Num/info/img/favicon.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/Img2Num/info/"><div class="navbar__logo"><img src="/Img2Num/info/img/favicon.svg" alt="Img2Num Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/Img2Num/info/img/favicon.svg" alt="Img2Num Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Img2Num</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/Img2Num/info/docs/">Documentation</a><a class="navbar__item navbar__link" href="/Img2Num/info/blog/">Blog</a><a class="navbar__item navbar__link" href="/Img2Num/info/changelog/">Changelog</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/Ryan-Millard/Img2Num" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Img2Num/info/docs/"><span title="üèÑ‚Äç‚ôÇÔ∏è Img2Num Docs" class="linkLabel_WmDU">üèÑ‚Äç‚ôÇÔ∏è Img2Num Docs</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/Img2Num/info/docs/category/-introduction/"><span title="üìñ Introduction" class="categoryLinkLabel_W154">üìñ Introduction</span></a><button aria-label="Collapse sidebar category &#x27;üìñ Introduction&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Img2Num/info/docs/introduction/usage/"><span title="‚ùì Usage" class="linkLabel_WmDU">‚ùì Usage</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Img2Num/info/docs/introduction/getting-started/"><span title="üöÄ Getting Started" class="linkLabel_WmDU">üöÄ Getting Started</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Img2Num/info/docs/introduction/core-concepts/"><span title="üß© Core Concepts" class="linkLabel_WmDU">üß© Core Concepts</span></a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Img2Num/info/docs/license/"><span title="‚öñÔ∏è AGPLv3 License" class="linkLabel_WmDU">‚öñÔ∏è AGPLv3 License</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/Img2Num/info/docs/category/guidelines/"><span title="Guidelines" class="categoryLinkLabel_W154">Guidelines</span></a><button aria-label="Expand sidebar category &#x27;Guidelines&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/Img2Num/info/docs/category/project-scripts/"><span title="Project Scripts" class="categoryLinkLabel_W154">Project Scripts</span></a><button aria-label="Expand sidebar category &#x27;Project Scripts&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/Img2Num/info/docs/category/Ô∏è-writing-documentation/"><span title="‚úçÔ∏è Writing Documentation" class="categoryLinkLabel_W154">‚úçÔ∏è Writing Documentation</span></a><button aria-label="Expand sidebar category &#x27;‚úçÔ∏è Writing Documentation&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" href="/Img2Num/info/docs/reference/"><span title="Reference" class="categoryLinkLabel_W154">Reference</span></a><button aria-label="Collapse sidebar category &#x27;Reference&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Img2Num/info/docs/reference/overview/"><span title="Reference Overview" class="linkLabel_WmDU">Reference Overview</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/Img2Num/info/docs/reference/react/"><span title="React" class="categoryLinkLabel_W154">React</span></a><button aria-label="Expand sidebar category &#x27;React&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" tabindex="0" href="/Img2Num/info/docs/reference/wasm/"><span title="WebAssembly (WASM)" class="categoryLinkLabel_W154">WebAssembly (WASM)</span></a><button aria-label="Collapse sidebar category &#x27;WebAssembly (WASM)&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/Img2Num/info/docs/reference/wasm/overview/"><span title="WebAssembly Overview" class="linkLabel_WmDU">WebAssembly Overview</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/Img2Num/info/docs/reference/wasm/wasm-setup-dependencies/"><span title="Setup &amp; Dependencies" class="linkLabel_WmDU">Setup &amp; Dependencies</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/Img2Num/info/docs/reference/wasm/wasm-using-react/"><span title="Using WASM modules in React" class="linkLabel_WmDU">Using WASM modules in React</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/Img2Num/info/docs/reference/wasm/wasm-dev-workflow/"><span title="Development workflow &amp; watch behavior" class="linkLabel_WmDU">Development workflow &amp; watch behavior</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/Img2Num/info/docs/reference/wasm/wasm-troubleshooting/"><span title="Troubleshooting &amp; size/ perf optimizations" class="linkLabel_WmDU">Troubleshooting &amp; size/ perf optimizations</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/Img2Num/info/docs/reference/wasm/wasm-add-module/"><span title="Adding a new WASM module" class="linkLabel_WmDU">Adding a new WASM module</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" tabindex="0" href="/Img2Num/info/docs/reference/wasm/modules/"><span title="Modules" class="categoryLinkLabel_W154">Modules</span></a><button aria-label="Collapse sidebar category &#x27;Modules&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/Img2Num/info/docs/reference/wasm/modules/overview/"><span title="Overview" class="linkLabel_WmDU">Overview</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" tabindex="0" href="/Img2Num/info/docs/reference/wasm/modules/image/"><span title="Image Module" class="categoryLinkLabel_W154">Image Module</span></a><button aria-label="Collapse sidebar category &#x27;Image Module&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/Img2Num/info/docs/reference/wasm/modules/image/overview/"><span title="Image Module Overview" class="linkLabel_WmDU">Image Module Overview</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-5 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/Img2Num/info/docs/reference/wasm/modules/image/fft_iterative/"><span title="fft_iterative.h" class="categoryLinkLabel_W154">fft_iterative.h</span></a><button aria-label="Expand sidebar category &#x27;fft_iterative.h&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-5 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/Img2Num/info/docs/reference/wasm/modules/image/mergeSmallRegionsInPlace/"><span title="mergeSmallRegionsInPlace.h" class="categoryLinkLabel_W154">mergeSmallRegionsInPlace.h</span></a><button aria-label="Expand sidebar category &#x27;mergeSmallRegionsInPlace.h&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-5 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" tabindex="0" href="/Img2Num/info/docs/reference/wasm/modules/image/bilateral_filter/"><span title="bilateral_filter.h" class="categoryLinkLabel_W154">bilateral_filter.h</span></a><button aria-label="Collapse sidebar category &#x27;bilateral_filter.h&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-6 menu__list-item"><a class="menu__link" tabindex="0" href="/Img2Num/info/docs/reference/wasm/modules/image/bilateral_filter/overview/"><span title="Overview" class="linkLabel_WmDU">Overview</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-6 menu__list-item"><a class="menu__link" tabindex="0" href="/Img2Num/info/docs/reference/wasm/modules/image/bilateral_filter/implementation/"><span title="Implementation" class="linkLabel_WmDU">Implementation</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-6 menu__list-item"><a class="menu__link" tabindex="0" href="/Img2Num/info/docs/reference/wasm/modules/image/bilateral_filter/api/"><span title="API / Usage" class="linkLabel_WmDU">API / Usage</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-6 menu__list-item"><a class="menu__link" tabindex="0" href="/Img2Num/info/docs/reference/wasm/modules/image/bilateral_filter/explained/"><span title="Implementation Explained" class="linkLabel_WmDU">Implementation Explained</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-6 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/Img2Num/info/docs/reference/wasm/modules/image/bilateral_filter/color-spaces/"><span title="Color Space Selection" class="linkLabel_WmDU">Color Space Selection</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-6 menu__list-item"><a class="menu__link" tabindex="0" href="/Img2Num/info/docs/reference/wasm/modules/image/bilateral_filter/keywords/"><span title="Keywords" class="linkLabel_WmDU">Keywords</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-5 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/Img2Num/info/docs/reference/wasm/modules/image/cielab/"><span title="cielab.h" class="categoryLinkLabel_W154">cielab.h</span></a><button aria-label="Expand sidebar category &#x27;cielab.h&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/Img2Num/info/docs/reference/tools/"><span title="Tools" class="categoryLinkLabel_W154">Tools</span></a><button aria-label="Expand sidebar category &#x27;Tools&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/Img2Num/info/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/Img2Num/info/docs/reference/"><span>Reference</span></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/Img2Num/info/docs/reference/wasm/"><span>WebAssembly (WASM)</span></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/Img2Num/info/docs/reference/wasm/modules/"><span>Modules</span></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/Img2Num/info/docs/reference/wasm/modules/image/"><span>Image Module</span></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/Img2Num/info/docs/reference/wasm/modules/image/bilateral_filter/"><span>bilateral_filter.h</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Color Space Selection</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Color Space Selection ‚Äî RGB vs CIELAB</h1></header>
<p>The bilateral filter in Img2Num supports two color spaces for computing range (color) distances: <strong>RGB</strong> and <strong>CIELAB</strong>. This guide explains the differences, trade-offs, and when to use each.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="quick-comparison">Quick Comparison<a href="#quick-comparison" class="hash-link" aria-label="Direct link to Quick Comparison" title="Direct link to Quick Comparison" translate="no">‚Äã</a></h2>
<table><thead><tr><th style="text-align:left">Aspect</th><th style="text-align:left">RGB</th><th style="text-align:left">CIELAB</th></tr></thead><tbody><tr><td style="text-align:left"><strong>Perceptual accuracy</strong></td><td style="text-align:left">Lower ‚Äî equal Euclidean distances don&#x27;t correspond to equal perceived color differences</td><td style="text-align:left">Higher ‚Äî designed to be perceptually uniform</td></tr><tr><td style="text-align:left"><strong>Performance</strong></td><td style="text-align:left">Faster ‚Äî uses precomputed LUT</td><td style="text-align:left">Slower ‚Äî requires conversion and on-the-fly computation</td></tr><tr><td style="text-align:left"><strong>Edge preservation</strong></td><td style="text-align:left">Good for most images</td><td style="text-align:left">Better for images with subtle color transitions</td></tr><tr><td style="text-align:left"><strong>Best for</strong></td><td style="text-align:left">General purpose, real-time applications</td><td style="text-align:left">High-quality processing, perceptual accuracy</td></tr></tbody></table>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="when-to-use-each-color-space">When to Use Each Color Space<a href="#when-to-use-each-color-space" class="hash-link" aria-label="Direct link to When to Use Each Color Space" title="Direct link to When to Use Each Color Space" translate="no">‚Äã</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="use-rgb-when">Use RGB when:<a href="#use-rgb-when" class="hash-link" aria-label="Direct link to Use RGB when:" title="Direct link to Use RGB when:" translate="no">‚Äã</a></h3>
<ul>
<li class=""><strong>Performance is critical</strong> ‚Äî RGB processing is significantly faster due to LUT optimization</li>
<li class=""><strong>Working with high-contrast images</strong> ‚Äî where edge preservation is less sensitive to color space choice</li>
<li class=""><strong>Real-time processing</strong> ‚Äî where milliseconds matter</li>
<li class=""><strong>Sigma_range values are well-tuned</strong> ‚Äî and visual results are satisfactory</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="use-cielab-when">Use CIELAB when:<a href="#use-cielab-when" class="hash-link" aria-label="Direct link to Use CIELAB when:" title="Direct link to Use CIELAB when:" translate="no">‚Äã</a></h3>
<ul>
<li class=""><strong>Perceptual uniformity matters</strong> ‚Äî you want visually equal smoothing across different hues</li>
<li class=""><strong>Working with skin tones or subtle gradients</strong> ‚Äî where human perception is sensitive</li>
<li class=""><strong>Quality over speed</strong> ‚Äî when processing time is less critical than output quality</li>
<li class=""><strong>Processing medical or scientific imagery</strong> ‚Äî where perceptual accuracy is important</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="mathematical-differences">Mathematical Differences<a href="#mathematical-differences" class="hash-link" aria-label="Direct link to Mathematical Differences" title="Direct link to Mathematical Differences" translate="no">‚Äã</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="distance-metrics">Distance Metrics<a href="#distance-metrics" class="hash-link" aria-label="Direct link to Distance Metrics" title="Direct link to Distance Metrics" translate="no">‚Äã</a></h3>
<p>Both color spaces compute the Euclidean distance between color vectors, but the ranges differ significantly.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="rgb-color-space">RGB Color Space<a href="#rgb-color-space" class="hash-link" aria-label="Direct link to RGB Color Space" title="Direct link to RGB Color Space" translate="no">‚Äã</a></h4>
<p>RGB channels are bounded <code>[0, 255]</code> per channel:</p>
<span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mtext>distance</mtext><mtext>RGB</mtext></msub><mo>=</mo><msqrt><mrow><mi mathvariant="normal">Œî</mi><msup><mi>R</mi><mn>2</mn></msup><mo>+</mo><mi mathvariant="normal">Œî</mi><msup><mi>G</mi><mn>2</mn></msup><mo>+</mo><mi mathvariant="normal">Œî</mi><msup><mi>B</mi><mn>2</mn></msup></mrow></msqrt></mrow><annotation encoding="application/x-tex">\text{distance}_{\text{RGB}} = \sqrt{\Delta R^2 + \Delta G^2 + \Delta B^2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em"></span><span class="mord"><span class="mord text"><span class="mord">distance</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em"><span style="top:-2.55em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">RGB</span></span></span></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1.24em;vertical-align:-0.1777em"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.0623em"><span class="svg-align" style="top:-3.2em"><span class="pstrut" style="height:3.2em"></span><span class="mord" style="padding-left:1em"><span class="mord">Œî</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7401em"><span style="top:-2.989em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord">Œî</span><span class="mord"><span class="mord mathnormal">G</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7401em"><span style="top:-2.989em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord">Œî</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05017em">B</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7401em"><span style="top:-2.989em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span><span style="top:-3.0223em"><span class="pstrut" style="height:3.2em"></span><span class="hide-tail" style="min-width:1.02em;height:1.28em"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.28em" viewBox="0 0 400000 1296" preserveAspectRatio="xMinYMin slice"><path d="M263,681c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l0 -0
c4.7,-7.3,11,-11,19,-11
H40000v40H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M1001 80h400000v40h-400000z"></path></svg></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:0.1777em"><span></span></span></span></span></span></span></span></span></span>
<p>Maximum possible distance:</p>
<span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mtext>max</mtext><mtext>RGB</mtext></msub><mo>=</mo><msqrt><mrow><msup><mn>255</mn><mn>2</mn></msup><mo>+</mo><msup><mn>255</mn><mn>2</mn></msup><mo>+</mo><msup><mn>255</mn><mn>2</mn></msup></mrow></msqrt><mo>‚âà</mo><mn>441.67</mn></mrow><annotation encoding="application/x-tex">\text{max}_{\text{RGB}} = \sqrt{255^2 + 255^2 + 255^2} \approx 441.67</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em"></span><span class="mord"><span class="mord text"><span class="mord">max</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em"><span style="top:-2.55em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">RGB</span></span></span></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1.24em;vertical-align:-0.1777em"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.0623em"><span class="svg-align" style="top:-3.2em"><span class="pstrut" style="height:3.2em"></span><span class="mord" style="padding-left:1em"><span class="mord">25</span><span class="mord"><span class="mord">5</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7401em"><span style="top:-2.989em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord">25</span><span class="mord"><span class="mord">5</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7401em"><span style="top:-2.989em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord">25</span><span class="mord"><span class="mord">5</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7401em"><span style="top:-2.989em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span><span style="top:-3.0223em"><span class="pstrut" style="height:3.2em"></span><span class="hide-tail" style="min-width:1.02em;height:1.28em"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.28em" viewBox="0 0 400000 1296" preserveAspectRatio="xMinYMin slice"><path d="M263,681c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l0 -0
c4.7,-7.3,11,-11,19,-11
H40000v40H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M1001 80h400000v40h-400000z"></path></svg></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:0.1777em"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">‚âà</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">441.67</span></span></span></span></span>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="cielab-color-space">CIELAB Color Space<a href="#cielab-color-space" class="hash-link" aria-label="Direct link to CIELAB Color Space" title="Direct link to CIELAB Color Space" translate="no">‚Äã</a></h4>
<p>CIELAB channels have different ranges:</p>
<ul>
<li class=""><strong>L*</strong>: <code>[0, 100]</code> (lightness)</li>
<li class=""><strong>a*</strong>: approximately <code>[-128, 127]</code> (green-red)</li>
<li class=""><strong>b*</strong>: approximately <code>[-128, 127]</code> (blue-yellow)</li>
</ul>
<span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mtext>distance</mtext><mtext>LAB</mtext></msub><mo>=</mo><msqrt><mrow><mi mathvariant="normal">Œî</mi><msup><mi>L</mi><mn>2</mn></msup><mo>+</mo><mi mathvariant="normal">Œî</mi><msup><mi>a</mi><mn>2</mn></msup><mo>+</mo><mi mathvariant="normal">Œî</mi><msup><mi>b</mi><mn>2</mn></msup></mrow></msqrt></mrow><annotation encoding="application/x-tex">\text{distance}_{\text{LAB}} = \sqrt{\Delta L^2 + \Delta a^2 + \Delta b^2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em"></span><span class="mord"><span class="mord text"><span class="mord">distance</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em"><span style="top:-2.55em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">LAB</span></span></span></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1.24em;vertical-align:-0.1777em"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.0623em"><span class="svg-align" style="top:-3.2em"><span class="pstrut" style="height:3.2em"></span><span class="mord" style="padding-left:1em"><span class="mord">Œî</span><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7401em"><span style="top:-2.989em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord">Œî</span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7401em"><span style="top:-2.989em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord">Œî</span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7401em"><span style="top:-2.989em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span><span style="top:-3.0223em"><span class="pstrut" style="height:3.2em"></span><span class="hide-tail" style="min-width:1.02em;height:1.28em"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.28em" viewBox="0 0 400000 1296" preserveAspectRatio="xMinYMin slice"><path d="M263,681c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l0 -0
c4.7,-7.3,11,-11,19,-11
H40000v40H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M1001 80h400000v40h-400000z"></path></svg></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:0.1777em"><span></span></span></span></span></span></span></span></span></span>
<p>Maximum theoretical distance:</p>
<span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mtext>max</mtext><mtext>LAB</mtext></msub><mo>=</mo><msqrt><mrow><msup><mn>100</mn><mn>2</mn></msup><mo>+</mo><msup><mn>255</mn><mn>2</mn></msup><mo>+</mo><msup><mn>255</mn><mn>2</mn></msup></mrow></msqrt><mo>‚âà</mo><mn>373.56</mn></mrow><annotation encoding="application/x-tex">\text{max}_{\text{LAB}} = \sqrt{100^2 + 255^2 + 255^2} \approx 373.56</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em"></span><span class="mord"><span class="mord text"><span class="mord">max</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em"><span style="top:-2.55em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">LAB</span></span></span></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1.24em;vertical-align:-0.1777em"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.0623em"><span class="svg-align" style="top:-3.2em"><span class="pstrut" style="height:3.2em"></span><span class="mord" style="padding-left:1em"><span class="mord">10</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7401em"><span style="top:-2.989em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord">25</span><span class="mord"><span class="mord">5</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7401em"><span style="top:-2.989em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord">25</span><span class="mord"><span class="mord">5</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7401em"><span style="top:-2.989em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span><span style="top:-3.0223em"><span class="pstrut" style="height:3.2em"></span><span class="hide-tail" style="min-width:1.02em;height:1.28em"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.28em" viewBox="0 0 400000 1296" preserveAspectRatio="xMinYMin slice"><path d="M263,681c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l0 -0
c4.7,-7.3,11,-11,19,-11
H40000v40H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M1001 80h400000v40h-400000z"></path></svg></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:0.1777em"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">‚âà</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">373.56</span></span></span></span></span>
<div class="theme-admonition theme-admonition-important admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Key Insight</div><div class="admonitionContent_BuS1"><p>In practice, most real-world pixel differences are <strong>much smaller</strong> than the maximum possible distance. CIELAB distances for neighboring pixels are typically smaller than RGB distances due to:</p><ol>
<li class=""><strong>Numerical compression</strong> from the RGB‚ÜíLAB conversion</li>
<li class=""><strong>Perceptual scaling</strong> ‚Äî LAB is designed to reflect human vision, which perceives smaller differences</li>
</ol></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="sigma_range-behavior-differences">Sigma_range Behavior Differences<a href="#sigma_range-behavior-differences" class="hash-link" aria-label="Direct link to Sigma_range Behavior Differences" title="Direct link to Sigma_range Behavior Differences" translate="no">‚Äã</a></h2>
<p>The <code>sigma_range</code> parameter controls edge preservation by weighting color similarity. However, the same <code>sigma_range</code> value produces <strong>different visual results</strong> in RGB vs CIELAB.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="the-range-weight-formula">The Range Weight Formula<a href="#the-range-weight-formula" class="hash-link" aria-label="Direct link to The Range Weight Formula" title="Direct link to The Range Weight Formula" translate="no">‚Äã</a></h3>
<p>The bilateral filter computes range weights using a Gaussian:</p>
<span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>w</mi><mtext>range</mtext></msub><mo>=</mo><mi>exp</mi><mo>‚Å°</mo><mrow><mo fence="true">(</mo><mo>‚àí</mo><mfrac><msup><mtext>distance</mtext><mn>2</mn></msup><mrow><mn>2</mn><msubsup><mi>œÉ</mi><mtext>range</mtext><mn>2</mn></msubsup></mrow></mfrac><mo fence="true">)</mo></mrow></mrow><annotation encoding="application/x-tex">w_{\text{range}} = \exp\left(-\frac{\text{distance}^2}{2\sigma_{\text{range}}^2}\right)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7167em;vertical-align:-0.2861em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">range</span></span></span></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:2.6446em;vertical-align:-1.0691em"></span><span class="mop">exp</span><span class="mspace" style="margin-right:0.1667em"></span><span class="minner"><span class="mopen delimcenter" style="top:0em"><span class="delimsizing size3">(</span></span><span class="mord">‚àí</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.5754em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">2</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">œÉ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7401em"><span style="top:-2.453em;margin-left:-0.0359em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">range</span></span></span></span></span><span style="top:-2.989em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:0.3831em"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"><span class="mord text"><span class="mord">distance</span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8984em"><span style="top:-3.1473em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:1.0691em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose delimcenter" style="top:0em"><span class="delimsizing size3">)</span></span></span></span></span></span></span>
<ul>
<li class="">When distance is <strong>small</strong>, weight is <strong>high</strong> (‚âà1) ‚Üí strong contribution</li>
<li class="">When distance is <strong>large</strong>, weight is <strong>low</strong> (‚âà0) ‚Üí weak contribution</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="why-the-same-sigma-produces-different-results">Why the Same Sigma Produces Different Results<a href="#why-the-same-sigma-produces-different-results" class="hash-link" aria-label="Direct link to Why the Same Sigma Produces Different Results" title="Direct link to Why the Same Sigma Produces Different Results" translate="no">‚Äã</a></h3>
<!-- -->
<div style="display:flex;flex-direction:column;justify-content:center;align-items:center"><svg style="width:100%;max-width:500px" viewBox="0 0 430 150" xmlns="http://www.w3.org/2000/svg"><rect x="0" y="0" width="100%" height="100%" fill="#fff"></rect><path d="M10,10 L13,10.062460953770952 L16,10.249376040365881 L19,10.559347769438347 L22,10.990066334662238 L25,11.538338276182792 L28,12.200125908345 L31,12.970596831782899 L34,13.844182680668212 L37,14.814646106340199 L40,15.875154870770224 L43,17.018361819872887 L46,18.236489429436403 L49,19.521417566605656 L52,20.864773087906592 L55,22.258019900549634 L58,23.692548146315453 L61,25.15976122519826 L64,26.651159457076282 L67,28.15841928141284 L70,29.673467014368327 L73,31.188546316410005 L76,32.69627866801453 L79,34.18971630272519 L82,35.66238720200141 L85,37.108331911419285 L88,38.52213208946304 L91,39.89893084526726 L94,41.23444505743002 L97,42.524969990012174 L100,43.76737663208252 L103,44.95910228213622 L106,46.098134977340294 L109,47.18299242924632 L112,48.212696172206826 L115,49.18674165850564 L118,50.105065045819266 L121,50.9680074190553 L124,51.776277171142254 L127,52.5309112374791 L130,53.233235838169364 L133,53.88482733265497 L136,54.48747373477574 L139,55.04313737446263 L142,55.55391912703068 L145,56.02202456408862 L148,56.44973231301815 L151,56.839364846235554 L154,57.19326185829331 L157,57.51375632938252 L160,57.80315331882963 L163,58.063711482416785 L166,58.29762726327003 L169,58.50702166794422 L172,58.69392950730409 L175,58.86029095581938 L178,59.00794526278148 L181,59.13862643441824 L184,59.253960696546606 L187,59.35546554279993 L190,59.44455017308788 L193,59.522517130248985 L196,59.590564949281294 L199,59.64979164253188 L202,59.7011988552497 L205,59.745696538449366 L208,59.78410799961835 L211,59.81717520599736 L214,59.84556422958816 L217,59.86987073736373 L220,59.89062544409086 L223,59.908299458496344 L226,59.92330946603378 L229,59.936022703105 L232,59.9467616881666 L235,59.95580868465325 L238,59.96340987905597 L241,59.969779264812026 L244,59.97510222892484 L247,59.97953884348859 L250,59.98322686860487 L253,59.98628447662533 L256,59.98881271031397 L259,59.99089768948165 L262,59.992612581988396 L265,59.994019355820946 L268,59.99517032931389 L271,59.99610953656922 L274,59.99687392481126 L277,59.99749439985569 L280,59.99799673513035 L283,59.998402358811276 L286,59.99872903267419 L289,59.998991435246175 L292,59.99920166080511 L295,59.99936964474115 L298,59.99950352478471 L301,59.999609946634884 L304,59.99969432160168 L307,59.99976104301339 L310,59.9998136673414 L310,60 L10,60 Z" fill="rgba(255,107,107,0.3)" stroke="#ff6b6b" stroke-width="2"></path><path d="M10,70 L13,70.11098774571968 L16,70.44247497558575 L19,70.99006633466223 L22,71.74654411051597 L25,72.70202655466173 L28,73.84418268066821 L31,75.15849701265657 L34,76.62857634082945 L37,78.2364894294364 L40,79.9631298541596 L43,81.78859174142548 L46,83.69254814631546 L49,85.65462212713061 L52,87.65474122678239 L55,89.67346701436833 L58,91.69229252414013 L61,93.69390179532718 L64,95.66238720200141 L67,97.58342180295284 L70,99.44438547464063 L73,101.23444505743002 L76,102.9445900951704 L79,104.56762693816906 L82,106.0981349773403 L85,107.53238956113519 L88,108.86825670605545 L91,110.10506504581927 L94,111.24346058274244 L97,112.28524972492158 L100,113.23323583816936 L103,114.09105414091097 L106,114.86300925487528 L109,115.55391912703068 L112,116.16896839097532 L115,116.71357356917348 L118,117.19326185829331 L121,117.6135646118418 L124,117.97992605629184 L127,118.29762726327003 L130,118.57172496077249 L133,118.80700440603098 L136,119.00794526278149 L139,119.17869922405572 L142,119.32307799316739 L145,119.44455017308789 L148,119.54624560921742 L151,119.63096577311629 L154,119.7011988552497 L157,119.75913834359469 L160,119.80670399302636 L163,119.84556422958816 L166,119.87715917697554 L169,119.9027236339267 L172,119.92330946603377 L175,119.9398070002586 L178,119.95296512275661 L181,119.96340987905597 L184,119.97166145962566 L187,119.97814952350501 L190,119.98322686860487 L193,119.98718150056972 L196,119.99024718401594 L199,119.9926125819884 L202,119.99442910311186 L205,119.99581758263851 L208,119.99687392481125 L211,119.99767383095237 L214,119.99827673158514 L217,119.99872903267419 L220,119.99906677654432 L223,119.99931780786491 L226,119.99950352478471 L229,119.99964028525542 L232,119.99974052906967 L235,119.9998136673414 L238,119.99986678318247 L241,119.9999051802228 L244,119.99993280938612 L247,119.99995259893606 L250,119.99996670819264 L253,119.99997672142142 L256,119.99998379513767 L259,119.99998876937217 L262,119.99999225123432 L265,119.99999467731429 L268,119.99999636002065 L271,119.99999752179734 L274,119.9999983202505 L277,119.9999988664987 L280,119.99999923850102 L283,119.99999949068503 L286,119.99999966086442 L289,119.99999977518253 L292,119.99999985162641 L295,119.9999999025116 L298,119.99999993622961 L301,119.99999995847067 L304,119.9999999730747 L307,119.99999998262054 L310,119.99999998883185 L310,120 L10,120 Z" fill="rgba(77,171,247,0.2)" stroke="#4dabf7" stroke-width="2"></path><text x="200" y="50" font-size="12" fill="#ff6b6b">RGB LUT</text><text x="200" y="110" font-size="12" fill="#4dabf7">CIELAB (on-the-fly)</text><line x1="10" y1="60" x2="310" y2="60" stroke="#000" stroke-width="0.5"></line><line x1="10" y1="120" x2="310" y2="120" stroke="#000" stroke-width="0.5"></line><text x="320" y="65" font-size="10">Color difference ŒîRGB</text><text x="320" y="125" font-size="10">Color difference ŒîLAB</text></svg><sub>Above, œÉ<sub>r</sub> = 20 for RGB and œÉ<sub>r</sub> = 15 for CIELAB.</sub></div>
<p><strong>With <code>sigma_range = 50</code></strong>:</p>
<ul>
<li class=""><strong>RGB</strong>: Typical neighboring pixel distances are small relative to 50, so many neighbors contribute significantly ‚Üí <strong>moderate blur</strong></li>
<li class=""><strong>CIELAB</strong>: Typical neighboring pixel distances are even smaller, so almost all neighbors contribute strongly ‚Üí <strong>stronger blur</strong></li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="sigma_range-scaling-for-visual-consistency">Sigma_range Scaling for Visual Consistency<a href="#sigma_range-scaling-for-visual-consistency" class="hash-link" aria-label="Direct link to Sigma_range Scaling for Visual Consistency" title="Direct link to Sigma_range Scaling for Visual Consistency" translate="no">‚Äã</a></h3>
<p>To achieve <strong>visually similar</strong> blur between RGB and CIELAB, you can scale <code>sigma_range</code>:</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Example: Scaling RGB sigma_range to match CIELAB visual output</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> sigma_range_base </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">50.0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Target CIELAB sigma_range</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> sigma_range_actual</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">color_space </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">COLOR_SPACE_RGB</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Scale RGB sigma_range to match CIELAB perceptually</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  sigma_range_actual </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> sigma_range_base </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4.18</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  sigma_range_actual </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> sigma_range_base</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-important admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Scaling Factor</div><div class="admonitionContent_BuS1"><p>The scaling factor of <strong>~4.18</strong> is empirically derived and works well for natural images. However:</p><ul>
<li class="">It&#x27;s <strong>not universal</strong> ‚Äî depends on image statistics</li>
<li class="">It&#x27;s <strong>not mandatory</strong> ‚Äî the different behaviors are valid features of each color space</li>
<li class=""><strong>Advanced users</strong> may want different sigma_range values for each space</li>
</ul></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="visual-example">Visual Example<a href="#visual-example" class="hash-link" aria-label="Direct link to Visual Example" title="Direct link to Visual Example" translate="no">‚Äã</a></h3>
<p>Using the same <code>sigma_range = 50</code>:</p>
<table><thead><tr><th style="text-align:left">Color Space</th><th style="text-align:left">Visual Result</th></tr></thead><tbody><tr><td style="text-align:left"><strong>CIELAB</strong></td><td style="text-align:left">Stronger smoothing, better edge preservation in perceptually uniform manner</td></tr><tr><td style="text-align:left"><strong>RGB</strong></td><td style="text-align:left">Moderate smoothing, adequate edge preservation for most use cases</td></tr><tr><td style="text-align:left"><strong>RGB (scaled)</strong></td><td style="text-align:left">Similar smoothing to CIELAB when <code>sigma_range ‚âà 209</code></td></tr></tbody></table>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="why-the-scaling-factor-exists-and-why-418-works">Why the Scaling Factor Exists (and Why ~4.18 Works)<a href="#why-the-scaling-factor-exists-and-why-418-works" class="hash-link" aria-label="Direct link to Why the Scaling Factor Exists (and Why ~4.18 Works)" title="Direct link to Why the Scaling Factor Exists (and Why ~4.18 Works)" translate="no">‚Äã</a></h2>
<p>RGB and CIELAB do <strong>not</strong> measure color differences on the same numeric scale. As a result, identical <code>sigma_range</code> values will generally not produce equivalent range weights or visual results.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="what-equivalent-behavior-means-mathematically">What ‚Äúequivalent behavior‚Äù means mathematically<a href="#what-equivalent-behavior-means-mathematically" class="hash-link" aria-label="Direct link to What ‚Äúequivalent behavior‚Äù means mathematically" title="Direct link to What ‚Äúequivalent behavior‚Äù means mathematically" translate="no">‚Äã</a></h3>
<p>The bilateral filter‚Äôs range weight is defined as:</p>
<span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>w</mi><mtext>range</mtext></msub><mo>=</mo><mi>exp</mi><mo>‚Å°</mo><mo stretchy="false">!</mo><mrow><mo fence="true">(</mo><mo>‚àí</mo><mfrac><msup><mi>d</mi><mn>2</mn></msup><mrow><mn>2</mn><msubsup><mi>œÉ</mi><mtext>range</mtext><mn>2</mn></msubsup></mrow></mfrac><mo fence="true">)</mo></mrow></mrow><annotation encoding="application/x-tex">w_{\text{range}} = \exp!\left(-\frac{d^2}{2\sigma_{\text{range}}^2}\right)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7167em;vertical-align:-0.2861em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">range</span></span></span></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:2.5602em;vertical-align:-1.0691em"></span><span class="mop">exp</span><span class="mclose">!</span><span class="mspace" style="margin-right:0.1667em"></span><span class="minner"><span class="mopen delimcenter" style="top:0em"><span class="delimsizing size3">(</span></span><span class="mord">‚àí</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.4911em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">2</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">œÉ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7401em"><span style="top:-2.453em;margin-left:-0.0359em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">range</span></span></span></span></span><span style="top:-2.989em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:0.3831em"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:1.0691em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose delimcenter" style="top:0em"><span class="delimsizing size3">)</span></span></span></span></span></span></span>
<p>For RGB and CIELAB to behave equivalently, they must produce <strong>the same range weight</strong> for corresponding color differences:</p>
<span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>exp</mi><mo>‚Å°</mo><mrow><mo fence="true">(</mo><mo>‚àí</mo><mfrac><msubsup><mi>d</mi><mtext>RGB</mtext><mn>2</mn></msubsup><mrow><mn>2</mn><msubsup><mi>œÉ</mi><mtext>RGB</mtext><mn>2</mn></msubsup></mrow></mfrac><mo fence="true">)</mo></mrow><mo>‚âà</mo><mi>exp</mi><mo>‚Å°</mo><mrow><mo fence="true">(</mo><mo>‚àí</mo><mfrac><msubsup><mi>d</mi><mtext>LAB</mtext><mn>2</mn></msubsup><mrow><mn>2</mn><msubsup><mi>œÉ</mi><mtext>LAB</mtext><mn>2</mn></msubsup></mrow></mfrac><mo fence="true">)</mo></mrow></mrow><annotation encoding="application/x-tex">\exp\left(-\frac{d_{\text{RGB}}^2}{2\sigma_{\text{RGB}}^2}\right)
\approx
\exp\left(-\frac{d_{\text{LAB}}^2}{2\sigma_{\text{LAB}}^2}\right)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.4706em;vertical-align:-0.9795em"></span><span class="mop">exp</span><span class="mspace" style="margin-right:0.1667em"></span><span class="minner"><span class="mopen delimcenter" style="top:0em"><span class="delimsizing size3">(</span></span><span class="mord">‚àí</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.4911em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">2</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">œÉ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7959em"><span style="top:-2.4065em;margin-left:-0.0359em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">RGB</span></span></span></span></span><span style="top:-3.0448em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:0.2935em"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8141em"><span style="top:-2.4247em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">RGB</span></span></span></span></span><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:0.2753em"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:0.9795em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose delimcenter" style="top:0em"><span class="delimsizing size3">)</span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">‚âà</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:2.4706em;vertical-align:-0.9795em"></span><span class="mop">exp</span><span class="mspace" style="margin-right:0.1667em"></span><span class="minner"><span class="mopen delimcenter" style="top:0em"><span class="delimsizing size3">(</span></span><span class="mord">‚àí</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.4911em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">2</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">œÉ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7959em"><span style="top:-2.4065em;margin-left:-0.0359em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">LAB</span></span></span></span></span><span style="top:-3.0448em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:0.2935em"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8141em"><span style="top:-2.4247em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">LAB</span></span></span></span></span><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:0.2753em"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:0.9795em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose delimcenter" style="top:0em"><span class="delimsizing size3">)</span></span></span></span></span></span></span>
<p>Taking the logarithm and simplifying yields:</p>
<span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mfrac><msub><mi>d</mi><mtext>RGB</mtext></msub><msub><mi>œÉ</mi><mtext>RGB</mtext></msub></mfrac><mo>‚âà</mo><mfrac><msub><mi>d</mi><mtext>LAB</mtext></msub><msub><mi>œÉ</mi><mtext>LAB</mtext></msub></mfrac></mrow><annotation encoding="application/x-tex">\frac{d_{\text{RGB}}}{\sigma_{\text{RGB}}}
\approx
\frac{d_{\text{LAB}}}{\sigma_{\text{LAB}}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.2074em;vertical-align:-0.836em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">œÉ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">RGB</span></span></span></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">RGB</span></span></span></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:0.836em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">‚âà</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:2.2074em;vertical-align:-0.836em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">œÉ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">LAB</span></span></span></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">LAB</span></span></span></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:0.836em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span>
<p>This implies the required relationship:</p>
<span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>œÉ</mi><mrow><mi>R</mi><mi>G</mi><mi>B</mi></mrow></msub><mo>‚âà</mo><mfrac><msub><mi>d</mi><mtext>RGB</mtext></msub><msub><mi>d</mi><mtext>LAB</mtext></msub></mfrac><msub><mi>œÉ</mi><mrow><mi>L</mi><mi>A</mi><mi>B</mi></mrow></msub></mrow><annotation encoding="application/x-tex">\sigma_{RGB} \approx
\frac{d_{\text{RGB}}}{d_{\text{LAB}}}
\sigma_{LAB}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6331em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">œÉ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05017em">RGB</span></span></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">‚âà</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:2.2074em;vertical-align:-0.836em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">LAB</span></span></span></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">RGB</span></span></span></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:0.836em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">œÉ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">L</span><span class="mord mathnormal mtight">A</span><span class="mord mathnormal mtight" style="margin-right:0.05017em">B</span></span></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></span>
<p>So the scaling factor is <strong>not arbitrary</strong> ‚Äî it is the <strong>ratio of typical RGB distances to LAB distances</strong> for the same pixel differences.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="where-the-value-418-comes-from">Where the value ~4.18 comes from<a href="#where-the-value-418-comes-from" class="hash-link" aria-label="Direct link to Where the value ~4.18 comes from" title="Direct link to Where the value ~4.18 comes from" translate="no">‚Äã</a></h3>
<p>For natural images (photographic content, sRGB, D65):</p>
<ol>
<li class="">
<p>Sample many <em>local</em> pixel pairs (neighbors).</p>
</li>
<li class="">
<p>Measure:</p>
<ul>
<li class=""><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mtext>RGB</mtext></msub><mo>=</mo><msqrt><mrow><mi mathvariant="normal">Œî</mi><msup><mi>R</mi><mn>2</mn></msup><mo>+</mo><mi mathvariant="normal">Œî</mi><msup><mi>G</mi><mn>2</mn></msup><mo>+</mo><mi mathvariant="normal">Œî</mi><msup><mi>B</mi><mn>2</mn></msup></mrow></msqrt></mrow><annotation encoding="application/x-tex">d_{\text{RGB}} = \sqrt{\Delta R^2 + \Delta G^2 + \Delta B^2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">RGB</span></span></span></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1.04em;vertical-align:-0.1266em"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9134em"><span class="svg-align" style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord" style="padding-left:0.833em"><span class="mord">Œî</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7401em"><span style="top:-2.989em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord">Œî</span><span class="mord"><span class="mord mathnormal">G</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7401em"><span style="top:-2.989em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord">Œî</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05017em">B</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7401em"><span style="top:-2.989em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span><span style="top:-2.8734em"><span class="pstrut" style="height:3em"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.08em" viewBox="0 0 400000 1080" preserveAspectRatio="xMinYMin slice"><path d="M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z"></path></svg></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:0.1266em"><span></span></span></span></span></span></span></span></span></li>
<li class=""><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mtext>LAB</mtext></msub><mo>=</mo><msqrt><mrow><mi mathvariant="normal">Œî</mi><msup><mi>L</mi><mn>2</mn></msup><mo>+</mo><mi mathvariant="normal">Œî</mi><msup><mi>a</mi><mn>2</mn></msup><mo>+</mo><mi mathvariant="normal">Œî</mi><msup><mi>b</mi><mn>2</mn></msup></mrow></msqrt></mrow><annotation encoding="application/x-tex">d_{\text{LAB}} = \sqrt{\Delta L^2 + \Delta a^2 + \Delta b^2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">LAB</span></span></span></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1.04em;vertical-align:-0.1266em"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9134em"><span class="svg-align" style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord" style="padding-left:0.833em"><span class="mord">Œî</span><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7401em"><span style="top:-2.989em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord">Œî</span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7401em"><span style="top:-2.989em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord">Œî</span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7401em"><span style="top:-2.989em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span><span style="top:-2.8734em"><span class="pstrut" style="height:3em"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.08em" viewBox="0 0 400000 1080" preserveAspectRatio="xMinYMin slice"><path d="M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z"></path></svg></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:0.1266em"><span></span></span></span></span></span></span></span></span></li>
</ul>
</li>
<li class="">
<p>Compute the ratio <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><msub><mi>d</mi><mrow><mi>R</mi><mi>G</mi><mi>B</mi></mrow></msub><msub><mi>d</mi><mrow><mi>L</mi><mi>A</mi><mi>B</mi></mrow></msub></mfrac></mrow><annotation encoding="application/x-tex">\frac{d_{RGB}}{d_{LAB}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.3417em;vertical-align:-0.4453em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8964em"><span style="top:-2.655em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em"><span style="top:-2.3567em;margin-left:0em;margin-right:0.0714em"><span class="pstrut" style="height:2.5em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">L</span><span class="mord mathnormal mtight">A</span><span class="mord mathnormal mtight" style="margin-right:0.05017em">B</span></span></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:0.1433em"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.4103em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em"><span style="top:-2.3567em;margin-left:0em;margin-right:0.0714em"><span class="pstrut" style="height:2.5em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05017em">RGB</span></span></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:0.1433em"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:0.4453em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>.</p>
</li>
<li class="">
<p>Aggregate (mean or median).</p>
</li>
</ol>
<p>Across a wide range of natural images, this ratio consistently clusters around:</p>
<span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><menclose notation="box"><mstyle scriptlevel="0" displaystyle="false"><mstyle scriptlevel="0" displaystyle="false"><mstyle scriptlevel="0" displaystyle="true"><mrow><mn>4.1</mn><mtext>¬†to¬†</mtext><mn>4.3</mn></mrow></mstyle></mstyle></mstyle></menclose></mrow><annotation encoding="application/x-tex">\boxed{4.1 \text{ to } 4.3}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.3244em;vertical-align:-0.34em"></span><span class="mord"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9844em"><span style="top:-3.3244em"><span class="pstrut" style="height:3.3244em"></span><span class="boxpad"><span class="mord"><span class="mord"><span class="mord">4.1</span><span class="mord text"><span class="mord">¬†to¬†</span></span><span class="mord">4.3</span></span></span></span></span><span style="top:-2.9844em"><span class="pstrut" style="height:3.3244em"></span><span class="stretchy fbox" style="height:1.3244em;border-style:solid;border-width:0.04em"></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:0.34em"><span></span></span></span></span></span></span></span></span></span>
<p>The value <strong>4.18</strong> lies near the center of this empirical range and provides a strong default for matching bilateral range behavior between RGB and CIELAB.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="why-this-ratio-is-stable-but-not-universal">Why this ratio is stable (but not universal)<a href="#why-this-ratio-is-stable-but-not-universal" class="hash-link" aria-label="Direct link to Why this ratio is stable (but not universal)" title="Direct link to Why this ratio is stable (but not universal)" translate="no">‚Äã</a></h3>
<p>The factor remains stable for natural images because:</p>
<ul>
<li class=""><strong>LAB compresses perceptual differences</strong>
Equal perceived color changes produce smaller numeric deltas than in RGB.</li>
<li class=""><strong>RGB channels are highly correlated</strong>
Euclidean RGB distance accumulates redundant energy across channels.</li>
<li class=""><strong>Bilateral filters operate locally</strong>
In the small-delta regime, the RGB‚ÜíLAB transform is locally quasi-linear.</li>
</ul>
<p>However, the factor may vary if:</p>
<ul>
<li class="">Images are synthetic or heavily quantized</li>
<li class="">A different RGB color space or white point is used</li>
<li class="">LAB components are re-weighted or normalized differently</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="practical-guidance">Practical guidance<a href="#practical-guidance" class="hash-link" aria-label="Direct link to Practical guidance" title="Direct link to Practical guidance" translate="no">‚Äã</a></h3>
<ul>
<li class="">
<p><strong>Recommended default</strong></p>
<p>For visually comparable smoothing on natural images, use:</p>
<span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>œÉ</mi><mrow><mi>r</mi><mi>a</mi><mi>n</mi><mi>g</mi><msub><mi>e</mi><mrow><mi>R</mi><mi>G</mi><mi>B</mi></mrow></msub></mrow></msub><mo>‚âà</mo><mn>4.18</mn><mo>√ó</mo><msub><mi>œÉ</mi><mrow><mi>r</mi><mi>a</mi><mi>n</mi><mi>g</mi><msub><mi>e</mi><mrow><mi>C</mi><mi>I</mi><mi>E</mi><mi>L</mi><mi>A</mi><mi>B</mi></mrow></msub></mrow></msub></mrow><annotation encoding="application/x-tex">\sigma_{range_{RGB}} \approx 4.18 \times \sigma_{range_{CIELAB}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7692em;vertical-align:-0.2861em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">œÉ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em">r</span><span class="mord mathnormal mtight">an</span><span class="mord mathnormal mtight" style="margin-right:0.03588em">g</span><span class="mord mtight"><span class="mord mathnormal mtight">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em"><span style="top:-2.3567em;margin-left:0em;margin-right:0.0714em"><span class="pstrut" style="height:2.5em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05017em">RGB</span></span></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:0.1433em"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">‚âà</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em"></span><span class="mord">4.18</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">√ó</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.7167em;vertical-align:-0.2861em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">œÉ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em">r</span><span class="mord mathnormal mtight">an</span><span class="mord mathnormal mtight" style="margin-right:0.03588em">g</span><span class="mord mtight"><span class="mord mathnormal mtight">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em"><span style="top:-2.3567em;margin-left:0em;margin-right:0.0714em"><span class="pstrut" style="height:2.5em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.07153em">C</span><span class="mord mathnormal mtight" style="margin-right:0.07847em">I</span><span class="mord mathnormal mtight" style="margin-right:0.05764em">E</span><span class="mord mathnormal mtight">L</span><span class="mord mathnormal mtight">A</span><span class="mord mathnormal mtight" style="margin-right:0.05017em">B</span></span></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:0.1433em"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em"><span></span></span></span></span></span></span></span></span></span></span>
</li>
<li class="">
<p><strong>Advanced usage</strong>
For strict equivalence, compute the ratio</p>
<span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>k</mi><mo>=</mo><mfrac><mrow><mi mathvariant="double-struck">E</mi><mo stretchy="false">[</mo><msub><mi>d</mi><mrow><mi>R</mi><mi>G</mi><mi>B</mi></mrow></msub><mo stretchy="false">]</mo></mrow><mrow><mi mathvariant="double-struck">E</mi><mo stretchy="false">[</mo><msub><mi>d</mi><mrow><mi>L</mi><mi>A</mi><mi>B</mi></mrow></msub><mo stretchy="false">]</mo></mrow></mfrac></mrow><annotation encoding="application/x-tex">k = \frac{\mathbb{E}[d_{RGB}]}{\mathbb{E}[d_{LAB}]}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em"></span><span class="mord mathnormal" style="margin-right:0.03148em">k</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:2.363em;vertical-align:-0.936em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathbb">E</span><span class="mopen">[</span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">L</span><span class="mord mathnormal mtight">A</span><span class="mord mathnormal mtight" style="margin-right:0.05017em">B</span></span></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mclose">]</span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathbb">E</span><span class="mopen">[</span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05017em">RGB</span></span></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mclose">]</span></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span>
<p>on your image set and scale <code>sigma_range</code> accordingly.</p>
</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="performance-considerations">Performance Considerations<a href="#performance-considerations" class="hash-link" aria-label="Direct link to Performance Considerations" title="Direct link to Performance Considerations" translate="no">‚Äã</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="rgb-performance">RGB Performance<a href="#rgb-performance" class="hash-link" aria-label="Direct link to RGB Performance" title="Direct link to RGB Performance" translate="no">‚Äã</a></h3>
<ul>
<li class=""><strong>Precomputed LUT</strong>: All 195,075 possible squared distances are precomputed</li>
<li class=""><strong>O(1) lookup</strong>: Range weight retrieval is extremely fast</li>
<li class=""><strong>Memory</strong>: ~1.5 MB for LUT (acceptable for most applications)</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="cielab-performance">CIELAB Performance<a href="#cielab-performance" class="hash-link" aria-label="Direct link to CIELAB Performance" title="Direct link to CIELAB Performance" translate="no">‚Äã</a></h3>
<ul>
<li class=""><strong>Full image conversion</strong>: RGB‚ÜíLAB conversion for entire image upfront</li>
<li class=""><strong>On-the-fly computation</strong>: Range weights computed using <code>exp()</code> for each neighbor</li>
<li class=""><strong>Slower but optimized</strong>: Conversion is done once; only distance calculation repeated</li>
</ul>
<p><strong>Performance Impact</strong>: CIELAB is typically <strong>2-4√ó slower</strong> than RGB, depending on image size and kernel radius.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Optimization Note</div><div class="admonitionContent_BuS1"><p>Future optimizations may include:</p><ul>
<li class="">Taylor/Horner polynomial approximations for <code>exp(-x¬≤)</code></li>
<li class="">SIMD vectorization for distance calculations</li>
<li class="">Adaptive LUT for CIELAB (with quantization)</li>
</ul></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="implementation-details">Implementation Details<a href="#implementation-details" class="hash-link" aria-label="Direct link to Implementation Details" title="Direct link to Implementation Details" translate="no">‚Äã</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="rgb-range-weights-lut">RGB Range Weights (LUT)<a href="#rgb-range-weights-lut" class="hash-link" aria-label="Direct link to RGB Range Weights (LUT)" title="Direct link to RGB Range Weights (LUT)" translate="no">‚Äã</a></h3>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Precompute all possible RGB distances</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">vector</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token keyword" style="color:#00009f">double</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">range_lut</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">MAX_RGB_DIST_SQ </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">&lt;=</span><span class="token plain"> MAX_RGB_DIST_SQ</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">++</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    range_lut</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">gaussian</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">sqrt</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> sigma_range</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Later, during filtering:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> dr </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> r_neighbor </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> r_center</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> dg </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> g_neighbor </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> g_center</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> db </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> b_neighbor </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> b_center</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> dist_sq </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> dr</span><span class="token operator" style="color:#393A34">*</span><span class="token plain">dr </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> dg</span><span class="token operator" style="color:#393A34">*</span><span class="token plain">dg </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> db</span><span class="token operator" style="color:#393A34">*</span><span class="token plain">db</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">double</span><span class="token plain"> w_range </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> range_lut</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">dist_sq</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// O(1) lookup</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="cielab-range-weights-on-the-fly">CIELAB Range Weights (On-the-fly)<a href="#cielab-range-weights-on-the-fly" class="hash-link" aria-label="Direct link to CIELAB Range Weights (On-the-fly)" title="Direct link to CIELAB Range Weights (On-the-fly)" translate="no">‚Äã</a></h3>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Precompute full-image RGB ‚Üí LAB conversion</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">vector</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token keyword" style="color:#00009f">double</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">cie_image</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">width </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> height </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">each pixel</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">rgb_to_lab</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">r</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> g</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> b</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> L</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> A</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> B</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cie_image</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">idx</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> L</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> cie_image</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">idx</span><span class="token operator" style="color:#393A34">+</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> A</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> cie_image</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">idx</span><span class="token operator" style="color:#393A34">+</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> B</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Later, during filtering:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">double</span><span class="token plain"> dL </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> L_neighbor </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> L_center</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">double</span><span class="token plain"> dA </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> A_neighbor </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> A_center</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">double</span><span class="token plain"> dB </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> B_neighbor </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> B_center</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">double</span><span class="token plain"> dist </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">sqrt</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">dL</span><span class="token operator" style="color:#393A34">*</span><span class="token plain">dL </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> dA</span><span class="token operator" style="color:#393A34">*</span><span class="token plain">dA </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> dB</span><span class="token operator" style="color:#393A34">*</span><span class="token plain">dB</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">double</span><span class="token plain"> w_range </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">gaussian</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">dist</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> sigma_range</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Computed on-the-fly</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="recommendations">Recommendations<a href="#recommendations" class="hash-link" aria-label="Direct link to Recommendations" title="Direct link to Recommendations" translate="no">‚Äã</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="default-choice">Default Choice<a href="#default-choice" class="hash-link" aria-label="Direct link to Default Choice" title="Direct link to Default Choice" translate="no">‚Äã</a></h3>
<p>For most applications, <strong>RGB</strong> is the recommended default:</p>
<ul>
<li class="">‚úÖ Faster processing</li>
<li class="">‚úÖ Good results for general images</li>
<li class="">‚úÖ Predictable behavior</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="when-to-switch-to-cielab">When to Switch to CIELAB<a href="#when-to-switch-to-cielab" class="hash-link" aria-label="Direct link to When to Switch to CIELAB" title="Direct link to When to Switch to CIELAB" translate="no">‚Äã</a></h3>
<p>Consider CIELAB when you observe:</p>
<ul>
<li class="">Inconsistent smoothing across different hues</li>
<li class="">Need for perceptually uniform processing</li>
<li class="">Working with images where color accuracy is critical</li>
<li class="">Willing to accept 2-4√ó performance cost</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="parameter-tuning">Parameter Tuning<a href="#parameter-tuning" class="hash-link" aria-label="Direct link to Parameter Tuning" title="Direct link to Parameter Tuning" translate="no">‚Äã</a></h3>
<p><strong>Starting values</strong>:</p>
<ul>
<li class=""><code>sigma_spatial = 3.0</code> (both color spaces)</li>
<li class=""><code>sigma_range = 50.0</code> (CIELAB) or <code>sigma_range = 200.0</code> (RGB for similar visual effect)</li>
</ul>
<p><strong>Adjustment guidelines</strong>:</p>
<ul>
<li class="">Increase <code>sigma_range</code> ‚Üí more blur, less edge preservation</li>
<li class="">Decrease <code>sigma_range</code> ‚Üí sharper edges, less smoothing</li>
<li class="">Test with your specific images ‚Äî optimal values vary by content</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="see-also">See Also<a href="#see-also" class="hash-link" aria-label="Direct link to See Also" title="Direct link to See Also" translate="no">‚Äã</a></h2>
<ul>
<li class=""><a class="" href="/Img2Num/info/docs/reference/wasm/modules/image/bilateral_filter/implementation/#range-weights">Implementation Details</a> ‚Äî Deep dive into LUT vs on-the-fly computation</li>
<li class=""><a class="" href="/Img2Num/info/docs/reference/wasm/modules/image/bilateral_filter/api/">API Reference</a> ‚Äî <code>color_space</code> parameter documentation</li>
<li class=""><a class="" href="/Img2Num/info/docs/reference/wasm/modules/image/bilateral_filter/keywords/">Keywords</a> ‚Äî Understanding range and spatial components</li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href="https://github.com/Ryan-Millard/Img2Num/edit/main/docs/docs/reference/wasm/modules/image/bilateral_filter/color-spaces.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/Img2Num/info/docs/reference/wasm/modules/image/bilateral_filter/explained/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Implementation Explained</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/Img2Num/info/docs/reference/wasm/modules/image/bilateral_filter/keywords/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Keywords</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#quick-comparison" class="table-of-contents__link toc-highlight">Quick Comparison</a></li><li><a href="#when-to-use-each-color-space" class="table-of-contents__link toc-highlight">When to Use Each Color Space</a><ul><li><a href="#use-rgb-when" class="table-of-contents__link toc-highlight">Use RGB when:</a></li><li><a href="#use-cielab-when" class="table-of-contents__link toc-highlight">Use CIELAB when:</a></li></ul></li><li><a href="#mathematical-differences" class="table-of-contents__link toc-highlight">Mathematical Differences</a><ul><li><a href="#distance-metrics" class="table-of-contents__link toc-highlight">Distance Metrics</a></li></ul></li><li><a href="#sigma_range-behavior-differences" class="table-of-contents__link toc-highlight">Sigma_range Behavior Differences</a><ul><li><a href="#the-range-weight-formula" class="table-of-contents__link toc-highlight">The Range Weight Formula</a></li><li><a href="#why-the-same-sigma-produces-different-results" class="table-of-contents__link toc-highlight">Why the Same Sigma Produces Different Results</a></li><li><a href="#sigma_range-scaling-for-visual-consistency" class="table-of-contents__link toc-highlight">Sigma_range Scaling for Visual Consistency</a></li><li><a href="#visual-example" class="table-of-contents__link toc-highlight">Visual Example</a></li></ul></li><li><a href="#why-the-scaling-factor-exists-and-why-418-works" class="table-of-contents__link toc-highlight">Why the Scaling Factor Exists (and Why ~4.18 Works)</a><ul><li><a href="#what-equivalent-behavior-means-mathematically" class="table-of-contents__link toc-highlight">What ‚Äúequivalent behavior‚Äù means mathematically</a></li><li><a href="#where-the-value-418-comes-from" class="table-of-contents__link toc-highlight">Where the value ~4.18 comes from</a></li><li><a href="#why-this-ratio-is-stable-but-not-universal" class="table-of-contents__link toc-highlight">Why this ratio is stable (but not universal)</a></li><li><a href="#practical-guidance" class="table-of-contents__link toc-highlight">Practical guidance</a></li></ul></li><li><a href="#performance-considerations" class="table-of-contents__link toc-highlight">Performance Considerations</a><ul><li><a href="#rgb-performance" class="table-of-contents__link toc-highlight">RGB Performance</a></li><li><a href="#cielab-performance" class="table-of-contents__link toc-highlight">CIELAB Performance</a></li></ul></li><li><a href="#implementation-details" class="table-of-contents__link toc-highlight">Implementation Details</a><ul><li><a href="#rgb-range-weights-lut" class="table-of-contents__link toc-highlight">RGB Range Weights (LUT)</a></li><li><a href="#cielab-range-weights-on-the-fly" class="table-of-contents__link toc-highlight">CIELAB Range Weights (On-the-fly)</a></li></ul></li><li><a href="#recommendations" class="table-of-contents__link toc-highlight">Recommendations</a><ul><li><a href="#default-choice" class="table-of-contents__link toc-highlight">Default Choice</a></li><li><a href="#when-to-switch-to-cielab" class="table-of-contents__link toc-highlight">When to Switch to CIELAB</a></li><li><a href="#parameter-tuning" class="table-of-contents__link toc-highlight">Parameter Tuning</a></li></ul></li><li><a href="#see-also" class="table-of-contents__link toc-highlight">See Also</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Documentation</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/Img2Num/info/docs/">Documentation</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/Ryan-Millard/Img2Num/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub Discussions<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/Img2Num/info/blog/">Blog</a></li><li class="footer__item"><a href="https://github.com/Ryan-Millard/Img2Num" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright ¬© 2026 Img2Num.</div></div></div></footer></div>
</body>
</html>