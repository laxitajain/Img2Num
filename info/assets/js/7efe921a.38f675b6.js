"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[4303],{21497:(e,s,a)=>{a.r(s),a.d(s,{assets:()=>r,contentTitle:()=>t,default:()=>o,frontMatter:()=>i,metadata:()=>n,toc:()=>c});const n=JSON.parse('{"id":"reference/wasm/modules/image/mergeSmallRegionsInPlace/complexity-and-memory","title":"Complexity and Memory","description":"A breakdown of the time complexity, memory usage, and cache behavior of the mergeSmallRegionsInPlace function.","source":"@site/docs/reference/wasm/modules/image/mergeSmallRegionsInPlace/complexity-and-memory.md","sourceDirName":"reference/wasm/modules/image/mergeSmallRegionsInPlace","slug":"/reference/wasm/modules/image/mergeSmallRegionsInPlace/complexity-and-memory","permalink":"/Img2Num/info/docs/reference/wasm/modules/image/mergeSmallRegionsInPlace/complexity-and-memory","draft":false,"unlisted":false,"editUrl":"https://github.com/Ryan-Millard/Img2Num/edit/main/docs/docs/reference/wasm/modules/image/mergeSmallRegionsInPlace/complexity-and-memory.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"id":"complexity-and-memory","title":"Complexity and Memory","sidebar_label":"Complexity and Memory","sidebar_position":6,"description":"A breakdown of the time complexity, memory usage, and cache behavior of the mergeSmallRegionsInPlace function."},"sidebar":"tutorialSidebar","previous":{"title":"Walkthrough & Usage","permalink":"/Img2Num/info/docs/reference/wasm/modules/image/mergeSmallRegionsInPlace/walkthrough-and-usage"},"next":{"title":"Limitations & Pitfalls","permalink":"/Img2Num/info/docs/reference/wasm/modules/image/mergeSmallRegionsInPlace/limitations-and-pitfalls"}}');var m=a(74848),l=a(28453);const i={id:"complexity-and-memory",title:"Complexity and Memory",sidebar_label:"Complexity and Memory",sidebar_position:6,description:"A breakdown of the time complexity, memory usage, and cache behavior of the mergeSmallRegionsInPlace function."},t=void 0,r={},c=[{value:"Time",id:"time",level:2},{value:"Memory",id:"memory",level:2},{value:"Cache behaviour",id:"cache-behaviour",level:2}];function h(e){const s={annotation:"annotation",code:"code",h2:"h2",math:"math",mi:"mi",mn:"mn",mo:"mo",mrow:"mrow",mtext:"mtext",p:"p",semantics:"semantics",span:"span",...(0,l.R)(),...e.components};return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(s.span,{className:"katex-display",children:(0,m.jsxs)(s.span,{className:"katex",children:[(0,m.jsx)(s.span,{className:"katex-mathml",children:(0,m.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block",children:(0,m.jsxs)(s.semantics,{children:[(0,m.jsxs)(s.mrow,{children:[(0,m.jsx)(s.mtext,{children:"Let\xa0"}),(0,m.jsx)(s.mi,{children:"N"}),(0,m.jsx)(s.mo,{children:"="}),(0,m.jsx)(s.mi,{children:"w"}),(0,m.jsx)(s.mi,{children:"i"}),(0,m.jsx)(s.mi,{children:"d"}),(0,m.jsx)(s.mi,{children:"t"}),(0,m.jsx)(s.mi,{children:"h"}),(0,m.jsx)(s.mo,{children:"\xd7"}),(0,m.jsx)(s.mi,{children:"h"}),(0,m.jsx)(s.mi,{children:"e"}),(0,m.jsx)(s.mi,{children:"i"}),(0,m.jsx)(s.mi,{children:"g"}),(0,m.jsx)(s.mi,{children:"h"}),(0,m.jsx)(s.mi,{children:"t"})]}),(0,m.jsx)(s.annotation,{encoding:"application/x-tex",children:"\\text{Let } N = width \\times height"})]})})}),(0,m.jsxs)(s.span,{className:"katex-html","aria-hidden":"true",children:[(0,m.jsxs)(s.span,{className:"base",children:[(0,m.jsx)(s.span,{className:"strut",style:{height:"0.6833em"}}),(0,m.jsx)(s.span,{className:"mord text",children:(0,m.jsx)(s.span,{className:"mord",children:"Let\xa0"})}),(0,m.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.10903em"},children:"N"}),(0,m.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,m.jsx)(s.span,{className:"mrel",children:"="}),(0,m.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,m.jsxs)(s.span,{className:"base",children:[(0,m.jsx)(s.span,{className:"strut",style:{height:"0.7778em",verticalAlign:"-0.0833em"}}),(0,m.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.02691em"},children:"w"}),(0,m.jsx)(s.span,{className:"mord mathnormal",children:"i"}),(0,m.jsx)(s.span,{className:"mord mathnormal",children:"d"}),(0,m.jsx)(s.span,{className:"mord mathnormal",children:"t"}),(0,m.jsx)(s.span,{className:"mord mathnormal",children:"h"}),(0,m.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,m.jsx)(s.span,{className:"mbin",children:"\xd7"}),(0,m.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,m.jsxs)(s.span,{className:"base",children:[(0,m.jsx)(s.span,{className:"strut",style:{height:"0.8889em",verticalAlign:"-0.1944em"}}),(0,m.jsx)(s.span,{className:"mord mathnormal",children:"h"}),(0,m.jsx)(s.span,{className:"mord mathnormal",children:"e"}),(0,m.jsx)(s.span,{className:"mord mathnormal",children:"i"}),(0,m.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:"g"}),(0,m.jsx)(s.span,{className:"mord mathnormal",children:"h"}),(0,m.jsx)(s.span,{className:"mord mathnormal",children:"t"})]})]})]})}),"\n",(0,m.jsx)(s.h2,{id:"time",children:"Time"}),"\n",(0,m.jsxs)(s.p,{children:["The flood-fill visits each pixel once and tests 4 neighbours (",(0,m.jsxs)(s.span,{className:"katex",children:[(0,m.jsx)(s.span,{className:"katex-mathml",children:(0,m.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,m.jsxs)(s.semantics,{children:[(0,m.jsxs)(s.mrow,{children:[(0,m.jsx)(s.mn,{children:"4"}),(0,m.jsx)(s.mo,{children:"\u22c5"}),(0,m.jsx)(s.mi,{children:"N"})]}),(0,m.jsx)(s.annotation,{encoding:"application/x-tex",children:"4 \\cdot N"})]})})}),(0,m.jsxs)(s.span,{className:"katex-html","aria-hidden":"true",children:[(0,m.jsxs)(s.span,{className:"base",children:[(0,m.jsx)(s.span,{className:"strut",style:{height:"0.6444em"}}),(0,m.jsx)(s.span,{className:"mord",children:"4"}),(0,m.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,m.jsx)(s.span,{className:"mbin",children:"\u22c5"}),(0,m.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,m.jsxs)(s.span,{className:"base",children:[(0,m.jsx)(s.span,{className:"strut",style:{height:"0.6833em"}}),(0,m.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.10903em"},children:"N"})]})]})]}),"), so the dominant cost is ",(0,m.jsxs)(s.span,{className:"katex",children:[(0,m.jsx)(s.span,{className:"katex-mathml",children:(0,m.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,m.jsxs)(s.semantics,{children:[(0,m.jsxs)(s.mrow,{children:[(0,m.jsx)(s.mi,{children:"O"}),(0,m.jsx)(s.mo,{stretchy:"false",children:"("}),(0,m.jsx)(s.mi,{children:"N"}),(0,m.jsx)(s.mo,{stretchy:"false",children:")"})]}),(0,m.jsx)(s.annotation,{encoding:"application/x-tex",children:"O(N)"})]})})}),(0,m.jsx)(s.span,{className:"katex-html","aria-hidden":"true",children:(0,m.jsxs)(s.span,{className:"base",children:[(0,m.jsx)(s.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,m.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.02778em"},children:"O"}),(0,m.jsx)(s.span,{className:"mopen",children:"("}),(0,m.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.10903em"},children:"N"}),(0,m.jsx)(s.span,{className:"mclose",children:")"})]})})]})," with a small constant\n(neighbour checks and byte comparisons). The merge pass is another similar ",(0,m.jsxs)(s.span,{className:"katex",children:[(0,m.jsx)(s.span,{className:"katex-mathml",children:(0,m.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,m.jsxs)(s.semantics,{children:[(0,m.jsxs)(s.mrow,{children:[(0,m.jsx)(s.mi,{children:"O"}),(0,m.jsx)(s.mo,{stretchy:"false",children:"("}),(0,m.jsx)(s.mi,{children:"N"}),(0,m.jsx)(s.mo,{stretchy:"false",children:")"})]}),(0,m.jsx)(s.annotation,{encoding:"application/x-tex",children:"O(N)"})]})})}),(0,m.jsx)(s.span,{className:"katex-html","aria-hidden":"true",children:(0,m.jsxs)(s.span,{className:"base",children:[(0,m.jsx)(s.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,m.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.02778em"},children:"O"}),(0,m.jsx)(s.span,{className:"mopen",children:"("}),(0,m.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.10903em"},children:"N"}),(0,m.jsx)(s.span,{className:"mclose",children:")"})]})})]})," scan, so overall ",(0,m.jsxs)(s.span,{className:"katex",children:[(0,m.jsx)(s.span,{className:"katex-mathml",children:(0,m.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,m.jsxs)(s.semantics,{children:[(0,m.jsxs)(s.mrow,{children:[(0,m.jsx)(s.mi,{children:"O"}),(0,m.jsx)(s.mo,{stretchy:"false",children:"("}),(0,m.jsx)(s.mi,{children:"N"}),(0,m.jsx)(s.mo,{stretchy:"false",children:")"})]}),(0,m.jsx)(s.annotation,{encoding:"application/x-tex",children:"O(N)"})]})})}),(0,m.jsx)(s.span,{className:"katex-html","aria-hidden":"true",children:(0,m.jsxs)(s.span,{className:"base",children:[(0,m.jsx)(s.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,m.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.02778em"},children:"O"}),(0,m.jsx)(s.span,{className:"mopen",children:"("}),(0,m.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.10903em"},children:"N"}),(0,m.jsx)(s.span,{className:"mclose",children:")"})]})})]}),"."]}),"\n",(0,m.jsx)(s.h2,{id:"memory",children:"Memory"}),"\n",(0,m.jsxs)(s.p,{children:["The implementation allocates a ",(0,m.jsx)(s.code,{children:"labels"})," array of ",(0,m.jsxs)(s.span,{className:"katex",children:[(0,m.jsx)(s.span,{className:"katex-mathml",children:(0,m.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,m.jsxs)(s.semantics,{children:[(0,m.jsx)(s.mrow,{children:(0,m.jsx)(s.mi,{children:"N"})}),(0,m.jsx)(s.annotation,{encoding:"application/x-tex",children:"N"})]})})}),(0,m.jsx)(s.span,{className:"katex-html","aria-hidden":"true",children:(0,m.jsxs)(s.span,{className:"base",children:[(0,m.jsx)(s.span,{className:"strut",style:{height:"0.6833em"}}),(0,m.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.10903em"},children:"N"})]})})]})," integers and a ",(0,m.jsx)(s.code,{children:"regions"})," vector whose size equals number of components\n(at most ",(0,m.jsxs)(s.span,{className:"katex",children:[(0,m.jsx)(s.span,{className:"katex-mathml",children:(0,m.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,m.jsxs)(s.semantics,{children:[(0,m.jsx)(s.mrow,{children:(0,m.jsx)(s.mi,{children:"N"})}),(0,m.jsx)(s.annotation,{encoding:"application/x-tex",children:"N"})]})})}),(0,m.jsx)(s.span,{className:"katex-html","aria-hidden":"true",children:(0,m.jsxs)(s.span,{className:"base",children:[(0,m.jsx)(s.span,{className:"strut",style:{height:"0.6833em"}}),(0,m.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.10903em"},children:"N"})]})})]}),"). So memory is ",(0,m.jsxs)(s.span,{className:"katex",children:[(0,m.jsx)(s.span,{className:"katex-mathml",children:(0,m.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,m.jsxs)(s.semantics,{children:[(0,m.jsxs)(s.mrow,{children:[(0,m.jsx)(s.mi,{children:"O"}),(0,m.jsx)(s.mo,{stretchy:"false",children:"("}),(0,m.jsx)(s.mi,{children:"N"}),(0,m.jsx)(s.mo,{stretchy:"false",children:")"})]}),(0,m.jsx)(s.annotation,{encoding:"application/x-tex",children:"O(N)"})]})})}),(0,m.jsx)(s.span,{className:"katex-html","aria-hidden":"true",children:(0,m.jsxs)(s.span,{className:"base",children:[(0,m.jsx)(s.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,m.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.02778em"},children:"O"}),(0,m.jsx)(s.span,{className:"mopen",children:"("}),(0,m.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.10903em"},children:"N"}),(0,m.jsx)(s.span,{className:"mclose",children:")"})]})})]})," additional to the image buffer."]}),"\n",(0,m.jsx)(s.h2,{id:"cache-behaviour",children:"Cache behaviour"}),"\n",(0,m.jsx)(s.p,{children:"BFS queue can cause random access inside large components; using a scanline two-pass connected-component algorithm (or union-find) can improve cache locality and throughput on big images."})]})}function o(e={}){const{wrapper:s}={...(0,l.R)(),...e.components};return s?(0,m.jsx)(s,{...e,children:(0,m.jsx)(h,{...e})}):h(e)}},28453:(e,s,a)=>{a.d(s,{R:()=>i,x:()=>t});var n=a(96540);const m={},l=n.createContext(m);function i(e){const s=n.useContext(l);return n.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function t(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(m):e.components||m:i(e.components),n.createElement(l.Provider,{value:s},e.children)}}}]);