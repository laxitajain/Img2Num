"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[9102],{28453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>l});var t=s(96540);const i={},o=t.createContext(i);function r(e){const n=t.useContext(o);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),t.createElement(o.Provider,{value:n},e.children)}},72801:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"reference/react/components/Tooltip/tests","title":"Tests","description":"This page documents the Vitest test suite for the Tooltip component and provides guidance for writing reliable tests,","source":"@site/docs/reference/react/components/Tooltip/tests.md","sourceDirName":"reference/react/components/Tooltip","slug":"/reference/react/components/Tooltip/tests","permalink":"/Img2Num/info/docs/reference/react/components/Tooltip/tests","draft":false,"unlisted":false,"editUrl":"https://github.com/Ryan-Millard/Img2Num/edit/main/docs/docs/reference/react/components/Tooltip/tests.md","tags":[],"version":"current","frontMatter":{"title":"Tests"},"sidebar":"tutorialSidebar","previous":{"title":"Tooltip","permalink":"/Img2Num/info/docs/reference/react/components/Tooltip/"},"next":{"title":"CSS - Styling","permalink":"/Img2Num/info/docs/reference/react/css"}}');var i=s(74848),o=s(28453);const r={title:"Tests"},l=void 0,c={},d=[{value:"Individual Test Explanations",id:"individual-test-explanations",level:2},{value:"Common Flakiness and Fixes",id:"common-flakiness-and-fixes",level:2},{value:"Testing Recommendations",id:"testing-recommendations",level:2}];function a(e){const n={code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.p,{children:["This page documents the Vitest test suite for the ",(0,i.jsx)(n.code,{children:"Tooltip"})," component and provides guidance for writing reliable tests,\nincluding for keyboard accessibility and portal behavior."]}),"\n",(0,i.jsx)(n.h2,{id:"individual-test-explanations",children:"Individual Test Explanations"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"does not show tooltip content by default"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Ensures the tooltip is not rendered until user interaction.\n",(0,i.jsx)(n.code,{children:"react-tooltip"})," appends the tooltip node to ",(0,i.jsx)(n.code,{children:"document.body"}),", accessible via ",(0,i.jsx)(n.code,{children:"screen"})," queries in jsdom."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"shows tooltip on hover"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"userEvent.hover"})," triggers pointer events. The tooltip library mounts the tooltip node in response."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"hides tooltip when mouse leaves"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Uses ",(0,i.jsx)(n.code,{children:"waitFor()"})," to accommodate any hide delays or CSS transitions."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"shows tooltip on keyboard focus"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Tests accessibility: the tooltip appears when the trigger element receives keyboard focus."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"hides tooltip when focus leaves"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Confirms the tooltip hides when the trigger loses focus. ",(0,i.jsx)(n.code,{children:"waitFor()"})," ensures the test accounts for any hide transition delays."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"common-flakiness-and-fixes",children:"Common Flakiness and Fixes"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Portal timing / animations"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"react-tooltip"})," may delay mounting/unmounting for animations.\nWrap visibility assertions in ",(0,i.jsx)(n.code,{children:"await waitFor()"})," or use ",(0,i.jsx)(n.code,{children:"findBy*"})," queries to retry until the tooltip appears/disappears:","\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"expect(await screen.findByText('Hello tooltip')).toBeVisible()\nawait waitFor(() => expect(screen.queryByText('Hello tooltip')).not.toBeInTheDocument())\n"})}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:"You can also disable CSS transitions in test setup for deterministic results."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Missing jsdom environment"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"Tooltip"})," renders portals to ",(0,i.jsx)(n.code,{children:"document.body"}),". Ensure Vitest is running with ",(0,i.jsx)(n.code,{children:"environment: 'jsdom'"}),"."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Event ordering"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Always use ",(0,i.jsx)(n.code,{children:"userEvent.setup()"})," and ",(0,i.jsx)(n.code,{children:"await"})," interactions. Avoid manually firing low-level events unless necessary."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Double focus / tab issues"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["When testing tooltips on interactive elements, pass a single focusable element (e.g., ",(0,i.jsx)(n.code,{children:"<button>"})," or ",(0,i.jsx)(n.code,{children:"<Link>"}),")\nas ",(0,i.jsx)(n.code,{children:"children"}),". If the component wraps non-element children in a ",(0,i.jsx)(n.code,{children:"<span tabIndex={0}>"}),", account for that extra tab stop in tests."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"React strict mode / act warnings"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Vitest + Testing Library usually handles ",(0,i.jsx)(n.code,{children:"act()"})," automatically. Ensure ",(0,i.jsx)(n.code,{children:"globals: true"})," in your test setup and keep dependencies updated."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"testing-recommendations",children:"Testing Recommendations"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Always test tooltips attached to ",(0,i.jsx)(n.strong,{children:"real interactive elements"})," (buttons, links, ",(0,i.jsx)(n.code,{children:"<Link>"})," from react-router-dom) to avoid duplicate tab stops."]}),"\n",(0,i.jsxs)(n.li,{children:["When testing external links or non-focusable nodes, account for the optional wrapper ",(0,i.jsx)(n.code,{children:"<span tabIndex={0}>"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Use ",(0,i.jsx)(n.code,{children:"findBy*"})," for asserting tooltip visibility; it retries until the tooltip appears."]}),"\n",(0,i.jsxs)(n.li,{children:["Wrap hide assertions in ",(0,i.jsx)(n.code,{children:"waitFor()"})," to accommodate CSS transitions or delayed unmounts."]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}}}]);