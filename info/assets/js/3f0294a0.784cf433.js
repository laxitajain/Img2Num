"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[330],{9351:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>t,contentTitle:()=>c,default:()=>h,frontMatter:()=>l,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"reference/tools/ci-workflows","title":"CI/CD Workflows","description":"Documentation for GitHub Actions workflows used in Img2Num\'s continuous integration and deployment pipeline","source":"@site/docs/reference/tools/ci-workflows.md","sourceDirName":"reference/tools","slug":"/reference/tools/ci-workflows","permalink":"/Img2Num/info/docs/reference/tools/ci-workflows","draft":false,"unlisted":false,"editUrl":"https://github.com/Ryan-Millard/Img2Num/edit/main/docs/docs/reference/tools/ci-workflows.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"title":"CI/CD Workflows","description":"Documentation for GitHub Actions workflows used in Img2Num\'s continuous integration and deployment pipeline","keywords":["CI","CD","GitHub Actions","workflows","automation","testing","linting"]},"sidebar":"tutorialSidebar","previous":{"title":"Tools Overview","permalink":"/Img2Num/info/docs/reference/tools/overview"}}');var r=i(74848),o=i(28453);const l={sidebar_position:2,title:"CI/CD Workflows",description:"Documentation for GitHub Actions workflows used in Img2Num's continuous integration and deployment pipeline",keywords:["CI","CD","GitHub Actions","workflows","automation","testing","linting"]},c="CI/CD Workflows",t={},d=[{value:"Workflows Overview",id:"workflows-overview",level:2},{value:"Lint Workflow",id:"lint-workflow",level:3},{value:"Script Validation Workflow",id:"script-validation-workflow",level:3},{value:"Running CI Checks Locally",id:"running-ci-checks-locally",level:2},{value:"Troubleshooting CI Failures",id:"troubleshooting-ci-failures",level:2},{value:"Lint Job Fails",id:"lint-job-fails",level:3},{value:"Script Validation Fails",id:"script-validation-fails",level:3},{value:"Workflow Configuration",id:"workflow-configuration",level:2},{value:"Node.js Version",id:"nodejs-version",level:3},{value:"Caching",id:"caching",level:3},{value:"Conditional Execution",id:"conditional-execution",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Future Enhancements",id:"future-enhancements",level:2}];function a(n){const e={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.header,{children:(0,r.jsx)(e.h1,{id:"cicd-workflows",children:"CI/CD Workflows"})}),"\n",(0,r.jsx)(e.p,{children:"Img2Num uses GitHub Actions for continuous integration and deployment. This page documents the workflows that run automatically on pull requests and pushes to main."}),"\n",(0,r.jsx)(e.h2,{id:"workflows-overview",children:"Workflows Overview"}),"\n",(0,r.jsx)(e.h3,{id:"lint-workflow",children:"Lint Workflow"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"File"}),": ",(0,r.jsx)(e.code,{children:".github/workflows/ci.yml"})," (lint job)"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Triggers"}),":"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["Pull requests to ",(0,r.jsx)(e.code,{children:"main"})]}),"\n",(0,r.jsxs)(e.li,{children:["Pushes to ",(0,r.jsx)(e.code,{children:"main"})]}),"\n"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Purpose"}),": Ensures all code meets our style and quality standards before merging."]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Steps"}),":"]}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsx)(e.li,{children:"Checkout code"}),"\n",(0,r.jsx)(e.li,{children:"Setup Node.js 22 with npm caching"}),"\n",(0,r.jsxs)(e.li,{children:["Install dependencies (",(0,r.jsx)(e.code,{children:"npm ci"}),")"]}),"\n",(0,r.jsxs)(e.li,{children:["Run ESLint (",(0,r.jsx)(e.code,{children:"npm run lint"}),")"]}),"\n",(0,r.jsxs)(e.li,{children:["Run editorconfig-checker (",(0,r.jsx)(e.code,{children:"npm run lint:style"}),")"]}),"\n"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"What it checks"}),":"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"JavaScript/React code quality (ESLint)"}),"\n",(0,r.jsx)(e.li,{children:"Code style consistency (indentation, line endings, etc.)"}),"\n",(0,r.jsx)(e.li,{children:"EditorConfig compliance"}),"\n"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Failure conditions"}),": The workflow fails if any linting errors are detected."]}),"\n",(0,r.jsx)(e.hr,{}),"\n",(0,r.jsx)(e.h3,{id:"script-validation-workflow",children:"Script Validation Workflow"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"File"}),": ",(0,r.jsx)(e.code,{children:".github/workflows/ci.yml"})," (validate-scripts job)"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Triggers"}),":"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["Pull requests to ",(0,r.jsx)(e.code,{children:"main"})," (when scripts are modified)"]}),"\n",(0,r.jsxs)(e.li,{children:["Pushes to ",(0,r.jsx)(e.code,{children:"main"})," (when scripts are modified)"]}),"\n"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Purpose"}),": Validates that every npm script has corresponding documentation in ",(0,r.jsx)(e.code,{children:"package.json"}),"'s ",(0,r.jsx)(e.code,{children:"scriptsInfo"})," section."]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Smart detection"}),": Only runs when:"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"package.json"})," or ",(0,r.jsx)(e.code,{children:"docs/package.json"})," changes include ",(0,r.jsx)(e.code,{children:"scriptsInfo"})," modifications"]}),"\n",(0,r.jsxs)(e.li,{children:["Files under ",(0,r.jsx)(e.code,{children:"scripts/"})," or ",(0,r.jsx)(e.code,{children:"docs/scripts/"})," are modified"]}),"\n"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Steps"}),":"]}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsx)(e.li,{children:"Detect if script-related files changed"}),"\n",(0,r.jsxs)(e.li,{children:["If yes, run ",(0,r.jsx)(e.code,{children:"npm run validate-scripts"})]}),"\n",(0,r.jsx)(e.li,{children:"Comment on PR if validation fails (with error details)"}),"\n"]}),"\n",(0,r.jsx)(e.hr,{}),"\n",(0,r.jsx)(e.h2,{id:"running-ci-checks-locally",children:"Running CI Checks Locally"}),"\n",(0,r.jsx)(e.p,{children:"To verify your changes will pass CI before pushing:"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# Run all lint checks\nnpm ci\nnpm run lint\nnpm run lint:style\n\n# Validate scripts (if you modified scripts)\nnpm run validate-scripts\n"})}),"\n",(0,r.jsx)(e.h2,{id:"troubleshooting-ci-failures",children:"Troubleshooting CI Failures"}),"\n",(0,r.jsx)(e.h3,{id:"lint-job-fails",children:"Lint Job Fails"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Symptoms"}),": ",(0,r.jsx)(e.code,{children:"npm run lint"})," or ",(0,r.jsx)(e.code,{children:"npm run lint:style"})," fails in CI"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Solutions"}),":"]}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:["Run the failing command locally:","\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"npm run lint        # for ESLint errors\nnpm run lint:style  # for style errors\n"})}),"\n"]}),"\n",(0,r.jsx)(e.li,{children:"Review the error messages"}),"\n",(0,r.jsxs)(e.li,{children:["Fix issues (use ",(0,r.jsx)(e.code,{children:"npm run lint:fix"})," for auto-fixable ESLint issues)"]}),"\n",(0,r.jsx)(e.li,{children:"Commit and push fixes"}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"script-validation-fails",children:"Script Validation Fails"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Symptoms"}),": ",(0,r.jsx)(e.code,{children:"validate-scripts"})," job fails"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Solutions"}),":"]}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:["Ensure every script in ",(0,r.jsx)(e.code,{children:"package.json"})," has an entry in ",(0,r.jsx)(e.code,{children:"scriptsInfo"})]}),"\n",(0,r.jsxs)(e.li,{children:["Run ",(0,r.jsx)(e.code,{children:"npm run validate-scripts"})," locally to see specific errors"]}),"\n",(0,r.jsxs)(e.li,{children:["Add missing ",(0,r.jsx)(e.code,{children:"scriptsInfo"})," entries or remove unused scripts"]}),"\n",(0,r.jsxs)(e.li,{children:["See ",(0,r.jsx)(e.a,{href:"/Img2Num/info/docs/project-scripts/overview",children:"Project Scripts"})," for more details"]}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"workflow-configuration",children:"Workflow Configuration"}),"\n",(0,r.jsx)(e.h3,{id:"nodejs-version",children:"Node.js Version"}),"\n",(0,r.jsxs)(e.p,{children:["All workflows use ",(0,r.jsx)(e.strong,{children:"Node.js 22"})," to match the project's runtime environment."]}),"\n",(0,r.jsx)(e.h3,{id:"caching",children:"Caching"}),"\n",(0,r.jsx)(e.p,{children:"npm dependencies are cached to speed up workflow runs:"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-yaml",children:"- uses: actions/setup-node@v4\n  with:\n    node-version: '22'\n    cache: 'npm'\n"})}),"\n",(0,r.jsx)(e.h3,{id:"conditional-execution",children:"Conditional Execution"}),"\n",(0,r.jsxs)(e.p,{children:["The ",(0,r.jsx)(e.code,{children:"validate-scripts"})," job only runs when necessary, saving CI resources:"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Checks git diff for relevant file changes"}),"\n",(0,r.jsxs)(e.li,{children:["Uses ",(0,r.jsx)(e.code,{children:"if: steps.check_changes.outputs.scripts_changed == 'true'"})]}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Run checks locally first"}),": Don't rely on CI to catch issues"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Keep commits lint-clean"}),": Fix linting issues before pushing"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Review CI logs"}),": If CI fails, read the full error output"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Ask for help"}),": If stuck, open a ",(0,r.jsx)(e.a,{href:"https://github.com/Ryan-Millard/Img2Num/discussions",children:"discussion"})," or comment on your PR"]}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"future-enhancements",children:"Future Enhancements"}),"\n",(0,r.jsx)(e.p,{children:"Planned improvements to CI workflows:"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Unit test automation"}),"\n",(0,r.jsx)(e.li,{children:"Build verification"}),"\n",(0,r.jsx)(e.li,{children:"Deployment automation"}),"\n",(0,r.jsx)(e.li,{children:"Code coverage reporting"}),"\n"]}),"\n",(0,r.jsx)(e.admonition,{title:"Contributing to CI",type:"info",children:(0,r.jsx)(e.p,{children:"If you want to improve or add new workflows, please open an issue first to discuss your ideas with the maintainers."})})]})}function h(n={}){const{wrapper:e}={...(0,o.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(a,{...n})}):a(n)}},28453:(n,e,i)=>{i.d(e,{R:()=>l,x:()=>c});var s=i(96540);const r={},o=s.createContext(r);function l(n){const e=s.useContext(o);return s.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:l(n.components),s.createElement(o.Provider,{value:e},n.children)}}}]);